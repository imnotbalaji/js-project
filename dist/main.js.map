{"version":3,"file":"main.js","mappings":"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","sources":["webpack://javascript-project/./src/scripts/chart.js","webpack://javascript-project/./src/scripts/security.js","webpack://javascript-project/./src/scripts/view.js","webpack://javascript-project/./src/index.js"],"sourcesContent":["class Chart {\n\n    constructor(stock,time_period, svg) {\n        this.time_period = time_period;\n        this.data = stock.data;\n        console.log(time_period);\n        // debugger\n        // console.log(this.get_period(time_period));\n        stock.get_data().then((data_array)=> {\n            // this.render_bar(data_array,svg);\n            // debugger\n            this.render_line(data_array,this.get_period(time_period),svg);\n        });\n     \n    \n    }\n    get_period(string){\n        \n        const time_period = [\"All\",\"10Y\",\"5Y\",\"2Y\",\"1Y\",\"6M\",\"3M\",\"1M\"];\n        switch(string) {\n            case \"All\":\n                return 365*50;\n                break;\n            case \"10Y\":\n                return 365 * 10;\n                break;\n            case \"5Y\":\n                return 365 * 5;\n                break;\n            case \"2Y\":\n                return 365 * 2;\n                break;\n            case \"1Y\":\n                return 365 * 1;\n                break; \n            case \"6M\":\n                return 30*6;\n                break; \n            case \"3M\":\n                return 30*3;\n                break; \n            case \"1M\":\n                return 30*1;\n                break;\n        }\n\n    }\n \n    render_line(received_data,time_period, svg){\n        // debugger\n        console.log(time_period);\n      \n        const formatTime = d3.timeFormat(\"%b-%y\");\n        \n        // const svg_width = svg.node().clientWidth;\n        // const svg_height = svg.node().clientHeight;\n        // console.log(svg_width);\n        // console.log(svg_height);\n\n        \n\n        const margin = {top: 0, bottom:0};\n        console.log(margin.top);\n        \n        \n        const today = new Date();\n        const cutoffdate = new Date();\n        const daysAgo = time_period;\n        cutoffdate.setDate(today.getDate()-daysAgo);\n\n        // Filter data and sort data;\n        const data = received_data.filter(d=> new Date(d.timestamp) > cutoffdate);\n        data.sort((a,b) => new Date(a.timestamp) - new Date(b.timestamp));\n\n\n\n        const start_value = data[0].value;\n\n        const end_value = data[data.length-1].value;\n\n        console.log(end_value);\n        console.log(start_value);\n\n        let chart_color;\n        if (end_value > start_value) {\n            chart_color = \"green\";\n        } else {\n            // debugger\n            chart_color = \"red\";\n\n        }\n\n\n\n        const xScale = d3.scaleTime()\n                          .domain(d3.extent(data, d=> new Date(d.timestamp)))\n                          .range([0,800]);\n        \n        const yScale = d3.scaleLinear()\n                         .domain([d3.min(data,d=>d.value),d3.max(data, d=> d.value)])\n                         .range([400,0+margin.top]);\n\n        const line = d3.line()\n                       .x(d=>xScale(new Date(d.timestamp)))\n                       .y(d=>yScale(d.value))\n                    \n\n        // Testing out some filter/ drop shadow effects \n\n        const existingFilter = svg.select(\"#shadow\");\n        if (existingFilter.empty()) {\n        // Create the filter definition and append it to the SVG\n            const filter = svg.append(\"defs\")\n                              .append(\"filter\")\n                              .attr(\"id\", \"shadow\")\n                              .attr(\"x\",\"0%\")\n                              .attr(\"y\",\"-50%\")\n                              .attr(\"height\",\"200%\")\n                              .attr(\"width\",\"200%\")\n\n            \n            filter.append(\"feGaussianBlur\")\n                  .attr(\"in\", \"SourceAlpha\")\n                  .attr(\"stdDeviation\", 3)\n                  .attr(\"result\", \"blur\");\n            \n\n            filter.append(\"feOffset\")\n                  .attr(\"in\", \"blur\")\n                  .attr(\"dx\", 3)\n                  .attr(\"dy\", 3)\n                  .attr(\"result\", \"offsetBlur\");\n\n        let feMerge = filter.append(\"feMerge\");\n\n        feMerge.append(\"feMergeNode\")\n               .attr(\"in\",\"offsetBlur\");\n        \n        feMerge.append(\"feMergeNode\")\n               .attr(\"in\",\"SourceGraphic\")\n\n\n    // filter.append(\"feBlend\")\n    //         .attr(\"in\", \"offsetBlur\")\n    //       .attr(\"in2\", \"blurOut\")\n    //         .attr(\"mode\", \"normal\");\n          \n        }\n\n        let existing_gradient = svg.select(\"#gradient\");\n\n        if (existing_gradient.empty()){\n\n            let gradient = svg.select(\"defs\").append('linearGradient')\n                                            .attr('id','gradient')\n                                            .attr('x1','0%')\n                                            .attr('y1','0%')\n                                            .attr('x2','0%')\n                                            .attr('y2','100%');\n            gradient.append('stop')\n                    .attr('offset','0%')\n                    .attr('stop-color',chart_color)\n                    .attr('stop-opacity',0.3);\n            gradient.append('stop')\n                    .attr('offset','100%')\n                    .attr('stop-color',chart_color)\n                    .attr('stop-opacity',0);\n\n        }\n\n        \n        \n\n        svg.select(\"#gradient\").selectAll(\"stop\").attr('stop-color',chart_color);\n        let min_value = d3.min(data,d=>d.value);\n        \n        let area = d3.area()\n                     .x(d=>xScale(new Date(d.timestamp)))\n                     .y1(d=>yScale(d.value))\n                     .y0(yScale(min_value));\n    \n \n        // Line creation and transitions \n\n        console.log(gradient);\n\n        let line_path = svg.select(\".line-path\");\n                        \n\n        let area_path = svg.select(\".area-path\");\n\n\n        if (area_path.empty()){\n\n             area_path = svg.append('path')\n                               .attr('class',\"area-path\")\n                              .style(\"fill\", \"url(#gradient\");\n\n\n        }\n\n        area_path.datum(data)\n                 .attr('d', area);\n\n        if (line_path.empty()){\n           \n            line_path = svg.append(\"path\")\n                           .attr(\"class\",\"line-path\")\n                           .attr(\"fill\",\"none\")\n                           .attr(\"stroke\",chart_color)\n                           .attr(\"stroke-width\", 0.7)\n                    //   .attr(\"filter\", \"url(#shadow\");\n        } \n\n        svg.select(\".line-path\").attr(\"stroke\",chart_color);\n\n                  line_path.datum(data)\n                      .attr(\"d\",line);\n\n\n\n         line_path\n               .attr(\"opacity\",0)\n               .transition()\n               .duration(500)\n               .ease(d3.easeLinear)\n               .attr(\"opacity\",1);\n\n\n        \n\n\n        /// Axes \n        \n        const xAxis = d3.axisBottom(xScale)\n                        .tickFormat(d=>formatTime(d))\n\n        let max_value = d3.max(data,d=>d.value);\n        \n        let tick_interval = ( max_value-min_value )/4;\n\n        let tick_values_axis = [min_value, min_value+tick_interval, min_value+2*tick_interval,min_value+3*tick_interval,max_value];\n        let tick_values_grid = [ min_value+tick_interval, min_value+2*tick_interval,min_value+3*tick_interval,max_value];\n\n        \n        const yAxis = d3.axisRight(yScale)\n                        .tickValues(tick_values_axis);\n\n     \n\n        let xAxisgroup = svg.select(\".x-axis\");\n\n        if (xAxisgroup.empty()){\n            xAxisgroup = svg.append(\"g\")\n                            .attr(\"class\",\"x-axis\")\n                            .attr(\"transform\", \"translate(0,\"+400+\")\")\n        }\n\n        xAxisgroup.transition()\n                  .duration(1000)\n                  .call(xAxis);\n\n\n\n        let yAxisgroup = svg.select(\".y-axis\");\n        if (yAxisgroup.empty()) {\n            yAxisgroup = svg.append(\"g\")\n                            .attr(\"class\",\"y-axis\")\n                            .attr(\"transform\",\"translate(\"+800+\",0)\");\n        }\n\n        yAxisgroup.transition()\n                  .duration(1000)\n                  .call(yAxis);\n\n        \n        const yAxisGrid = d3.axisRight(yScale)\n                            // .attr(\"transform\",\"translate(\"+600+\",0)\")\n                            .tickSize(+800)\n                            .tickValues(tick_values_grid)\n                            .tickFormat('');\n        \n        svg.append('g')\n            .attr('class','y grid')\n            .call(yAxisGrid);\n\n            svg.selectAll(\"text\")\n                .style(\"font-family\",\"Arial\")\n                .style(\"font-zie\",\"14px\");\n                        \n\n    \n\n        const hoverCircle = svg.append('circle')\n                               .attr(\"r\",5)\n                               .attr('fill',\"red\")\n                               .style(\"display\",\"none\");\n\n        const hoverText = svg.append('text')\n                             .attr('dy','-1em')\n                             .style('text-anchor','middle')\n                             .style('display','none');\n\n        const hoverLine = svg.append(\"line\")\n                              .attr(\"stroke\", \"grey\")\n                              .attr(\"stroke-width\",\"1\")\n                              .attr(\"stroke-dasharray\",\"5,5\")\n                              .style(\"display\",\"none\");\n\n        svg.on('mouseover',onMouseOver)\n            .on('mousemove', onMouseMove)\n            .on('mouseout',onMouseOut);\n\n        function onMouseOver(){\n            hoverCircle.style('display',null);\n            hoverText.style('display',null);\n            hoverLine.style('display',null);\n\n        }\n\n        function onMouseMove(event) {\n            const [mx, my] = d3.pointer(event);  // Get mouse coordinates\n         \n            const date = xScale.invert(mx);      // Invert the x-scale to get the date\n        \n            const bisectDate = d3.bisector(d=> new Date(d.timestamp)).left;\n\n            const index = bisectDate(data,date);\n            const closestDataPoint = data[index];\n\n            // console.log(closestDataPoint);\n            \n            hoverCircle.attr('cx', xScale(new Date(closestDataPoint.timestamp)))\n                       .attr('cy',yScale(closestDataPoint.value));\n            hoverLine.attr('x1',xScale(new Date(closestDataPoint.timestamp)))\n                     .attr('x2',xScale(new Date(closestDataPoint.timestamp)))\n                     .attr('y1',yScale(min_value))\n                     .attr('y2',yScale(closestDataPoint.value))\n                    \n            hoverText.attr('x',xScale(new Date(closestDataPoint.timestamp))) \n                     .attr('y',yScale(closestDataPoint.value) -10)\n                     .text(closestDataPoint.value)\n                     .style(\"font-family\",\"Roboto, Sans Serif\")\n                     .style(\"font-size\",\"12px\")\n                     .style(\"font-weight\",\"bold\");\n            \n        }\n\n        function onMouseOut(){\n            hoverCircle.style('display','none');\n            hoverText.style('display','none');\n            hoverLine.style('display','none');\n        }\n    }\n\n}\n\nexport default Chart;","class Security {\n    constructor(ticker){\n        console.log(ticker);\n        this.ticker = ticker;\n        this.data =  [30,80,45, 60, 121, 90, 15];   \n    }\n    async get_data(){\n        \n        // debugger;\n\n        // We need this for the url fetching \n        let url = this.url_maker();\n        console.log(url);\n        const res = await fetch(url);\n        const raw_data = await res.json();\n        \n        // const raw_data =  await d3.json('./test_data/IBM_daily_full.json');\n        \n        // console.log(raw_data);\n        const time_series = raw_data[\"Time Series (Daily)\"];\n        let data_array = Object.keys(time_series).map(key => ({timestamp: key, value: parseFloat(time_series[key][\"1. open\"])}));\n\n        return data_array;\n    \n    }\n\n\n\n    url_maker(){\n        let url = \"https://www.alphavantage.co/query?\"\n        let func = \"TIME_SERIES_DAILY\";\n        let symbol = this.ticker.symbol;\n        // console.log(symbol);\n        // let interval = \"60min\"\n        let output_size = \"full\"\n        let apikey = \"XIW7BTPB24E0PU15\";\n\n        // return url+\"function=\"+func+\"&symbol=\"+symbol+\"&interval=\"+interval+\"&apikey=\"+apikey;\n        return url+\"function=\"+func+\"&symbol=\"+symbol+\"&outputsize=\"+output_size+\"&apikey=\"+apikey;\n    }\n    \n\n    generateRandomData(){\n        const data = []\n        const startTime = new Date();\n        startTime.setHours(9,0,0,0);\n        const endTime = new Date();\n        endTime.setHours(17,0,0,0);\n\n        for (let time = startTime; time <= endTime; time.setMinutes(time.getMinutes()+30)){\n            const randomPrice = Math.random()*(200-100) + 100;\n            data.push({\n                timestamp: time.toISOString(),\n                value: randomPrice.toFixed(2)\n            }\n            )\n        }\n        return data;\n    }\n}\nexport default Security;","import Chart from \"./chart\";\nimport Security from \"./security\";\n\nclass View {\n    constructor(){\n        const main = d3.select(\"#main\"); \n        this.render(main);\n    }\n\n    // This function will render our main screen and handle the logic to take input and direct the logic elsewhere\n    \n    render(main){\n   \n    main.style(\"height\",\"90vh\")\n        .style(\"width\",\"70%\")\n        .style(\"border\", \"none\")\n        .style(\"border-radius\", \"1%\")\n        .style(\"background-color\", \"white\")\n        .style(\"box-shadow\" ,\"5px 5px 10px rgba(0, 0, 0, 0.5)\");\n    \n    // const banner = main.append(\"banner\")   \n    //                 .attr(\"id\",\"banner\")\n    //                 .style(\"width\",\"100%\");\n    \n    const search_container = main.append(\"div\")\n                                 .attr(\"id\",\"search_container\")\n                                 .attr(\"position\",\"relative\")\n                                 .style(\"padding\",\"20px\")\n                                 .style(\"width\",\"90%\")\n                                 .style(\"height\",\"10%\");\n\n    // const help_icon = search_container.append(\"button\")\n    //                                   .text(\"help\");\n\n\n    const ticker_input = search_container.append(\"input\")\n                                         .attr(\"id\",\"search-input\")\n                                         .attr(\"placeholder\",\"Input your ticker to get started...\")\n                                         .style(\"width\",\"50%\")\n                                         .style(\"border\", \"1px solid grey\")\n                                         .style(\"border-radius\",\"15px\")\n                                        //  .style(\"box-sizing\",\"border-box\")\n                                         .style(\"margin\", \"20px 20px\")\n                                         .style(\"font-size\",\"20px\")\n                                         .style(\"padding\", \"10px 10px\")\n                                         .style(\"box-shadow\" ,\"5px 5px 10px rgba(0, 0, 0, 0.5)\")\n                                         .style(\"text-transform\",\"uppercase\");\n    const chart = main.append(\"div\")\n                       .attr(\"id\",\"chart\")\n                       .style(\"height\",\"80%\")\n                       .style(\"margin-top\",\"25px\");\n                       \n\n    const svg = chart.append(\"svg\")\n                    .attr(\"viewBox\",\"0 0 800 400\")\n                    .attr(\"preserveAspectRatio\",\"none\")\n                    // .attr(\"style\",\"outline: thin solid black\")\n                    // .style(\"border\", \"1px solid black\") // temporary - let's remove it after some time \n                    // .style(\"fill\",\"none\")\n                    \n                    .style(\"width\",\"90%\")\n                    .style(\"height\",\"75%\")\n                    .style(\"overflow\",\"visible\");\n\n\n     const footer = main.append(\"div\")\n                        .attr(\"id\",\"footer\")\n                        .style(\"width\", \"100%\")\n                        .style(\"background-color\",\"beige\")\n                        .style(\"height\",\"10%\")\n                        .style(\"border-top\",\"2px solid grey\")\n    \n    const links = d3.select(\"#footer\")\n                    .append(\"div\")\n                    .attr(\"id\",\"links\")\n                    .style(\"margin-left\",\"20px\");\n                    \n\n    links.append(\"a\")\n         .attr(\"id\",\"github\")\n         .attr(\"href\",\"https://github.com/imnotbalaji\")\n         .attr(\"target\",\"_blank\")\n         .append(\"img\")\n         .attr(\"src\",\"./images/github.png\")\n         .style(\"width\",\"25px\");\n\n    links.append(\"a\")\n         .attr(\"id\",\"github\")\n         .attr(\"href\",\"https://www.linkedin.com/in/balajiv1/\")\n         .attr(\"target\",\"_blank\")\n         .append(\"img\")\n         .attr(\"src\",\"./images/linked_in.png\")\n         .style(\"width\",\"25px\")\n\n\n\n    const openModal = d3.select(\"#footer\")\n                        .append(\"button\")\n                        .attr(\"id\",\"Instructions\")\n                        .text(\"User Guide\")\n                        .style(\"margin-right\",\"20px\")\n\n    \n    \n    let user_guide = d3.select(\"#user-guide\")\n    openModal.on(\"click\", function(){\n        user_guide.style(\"display\",\"block\")\n    })\n\n    let close = d3.select(\".close\");\n\n    close.on(\"click\", function(){\n        user_guide.style(\"display\",\"none\");\n    })\n\n    d3.select(window).on(\"click\", function(event){\n        console.log(event.target);\n        console.log(user_guide.node())\n        if (event.target == user_guide.node()){\n            console.log(\"window clicked\");\n            user_guide.style(\"display\",\"none\");\n\n        }\n    })\n\n\n\n\n            \n                  \n    \n    \n    \n    const bound_search_ticker = this.test_search_ticker.bind(this);\n    const debounced_search_ticker = this.debounce(bound_search_ticker,250);\n    \n    ticker_input.on(\"input\", debounced_search_ticker);\n   \n    // -- tempoarary code \n        // const dropdown = d3.select(\"#dropdown\");\n        // ticker_input.on(\"input\", function(event){\n        //     const value = event.target.value;\n        //     if (value === \"\"){\n        //         dropdown.attr(\"class\",\"dropdown-hidden\");\n\n        //     }else{\n        //         dropdown.attr(\"class\",\"dropdown-visible\");\n        //         debounced_search_ticker(event);\n\n        //     }\n\n        // });\n\n    /// -- trying it out \n\n    }\n    // ------------- Helper function to debounce;\n    debounce(callback, delay) {\n        let timeout;\n        return (arg) => {\n            clearTimeout(timeout);\n            timeout = setTimeout(()=> callback(arg), delay);\n        }\n    }\n\n    // --- look for the keyword\n    async test_search_ticker(event){\n        const keywords = event.target.value;\n        if (keywords !== \"\") {\n            // Construct the URL\n            const base_url = \"https://www.alphavantage.co/query?\"\n            const func = \"SYMBOL_SEARCH\";\n            const keyword = d3.select(event.target).property(\"value\");\n            const data_type = \"json\"\n            const apikey = \"XIW7BTPB24E0PU15\";\n            const fetch_url = base_url + \"function=\" + func + \"&keywords=\" + keyword + \"&datatype=\" + data_type + \"&apikey=\" +apikey;\n            // Make a fetch request and parse the json output \n            const res = await fetch(fetch_url);\n            const tickers = await res.json();\n            // Call the dropdown with the inner data from the received json data\n            this.render_search_dropdown(tickers[\"bestMatches\"]);\n        } else {\n            // Hide the dropdown if the input box is empty\n            const dropdown = d3.select(\"#dropdown\");\n            dropdown.attr(\"class\",\"dropdown-hidden\");\n        }\n\n    }\n\n    render_search_dropdown(dropdown_items_array) {\n\n        d3.select(\"#dropdown\").remove();\n\n        const dropdown_items = dropdown_items_array.map((d)=> ({symbol: d[\"1. symbol\"], name: d[\"2. name\"]}));\n        console.log(dropdown_items);\n\n        const drop_down = d3.select(\"#search_container\")\n                            .append(\"div\")\n                            .attr(\"id\", \"dropdown\")\n                            .style(\"position\",\"absolute\")\n                            .style(\"width\",\"45%\")\n                            .style(\"background-color\",\"white\")\n                            .attr(\"overflow-y\",\"auto\")\n                            .style(\"margin-left\",\"5px\")\n                            .style(\"margin-top\",\"65px\")\n                            .style(\"padding\",\"10px 10px\")\n                            // .style(\"box-sizing\",\"border-box\")\n                            .style(\"border\",\"1px solid black\")\n                            .style(\"border-radius\", \"15px\");\n\n        const dropdownitems = drop_down.selectAll(\"div\")\n                                       .data(dropdown_items)\n                                        .enter()\n                                        .append(\"div\")\n                                        .attr('id','dropdown-item')\n                                        .attr(\"width\", \"30%\")\n                                        .text(d=>`${d.symbol}      ${d.name}`);\n\n        dropdownitems.on(\"click\",(event,d)=>{\n            d3.select(\"#search-input\").property(\"value\",d.symbol);\n            console.log(d);\n            this.render_chart_ticker(d);\n            \n\n        })\n        \n\n    }\n    render_chart_ticker(ticker){\n        d3.select(\"#dropdown\").remove();\n        let svg = d3.select(\"svg\");\n        // debugger\n        const stock = new Security(ticker);\n        this.render_chart(stock,\"All\",svg);\n        this.show_zoom_buttons(stock);\n    }\n\n   \n    \n\n    render_chart(stock,selected_time_period,svg){\n        new Chart(stock,selected_time_period, svg);\n\n    }\n    show_zoom_buttons(stock){\n        // debugger\n        let chart = d3.select(\"#chart\");\n        let svg = d3.select(\"svg\");\n\n        \n        const time_period = [\"All\",\"10Y\",\"5Y\",\"2Y\",\"1Y\",\"6M\",\"3M\",\"1M\"];\n        let selected_time_period = time_period[0];\n\n\n        let zoom = d3.select(\"#zoom\");\n\n\n        if (zoom.empty()) {\n            // debugger\n\n            zoom = chart.append(\"div\")\n                       .attr(\"id\",\"zoom\");\n\n                const zoom_out = zoom.append(\"img\")\n                            .attr(\"id\",\"zoom-out\")\n                            .attr(\"src\",\"./images/zoom_out.png\")\n                            .attr(\"width\",\"25px\")\n                            .attr(\"height\",\"25px\");\n                \n                const zoom_text = zoom.append(\"span\").attr(\"id\",\"zoom_text\");\n\n                const zoom_in = zoom.append(\"img\")\n                          .attr(\"id\",\"zoom-in\")\n                          .attr(\"src\",\"./images/zoom_in.png\")\n                          .attr(\"width\",\"25px\")\n                          .attr(\"height\",\"25px\");\n        }\n\n            \n        let zoom_out = d3.select(\"#zoom-out\");\n        \n        d3.select(\"#zoom_text\").text(selected_time_period);\n        \n        zoom_out.on(\"click\", () => {\n                            selected_time_period = time_period[time_period.indexOf(selected_time_period)-1];\n                            // d3.select(\"#zoom_text\").remove();\n                            d3.select(\"#zoom_text\").text(selected_time_period);\n                            this.render_chart(stock,selected_time_period,svg);\n                            });\n        \n        \n        \n        \n\n        \n        let zoom_in = d3.select(\"#zoom-in\");\n\n\n            \n            \n        zoom_in.on(\"click\", () => {\n                        selected_time_period = time_period[time_period.indexOf(selected_time_period)+1];\n                        // d3.select(\"#zoom_text\").remove();\n                        d3.select(\"#zoom_text\").text(selected_time_period);\n                        this.render_chart(stock,selected_time_period,svg);\n                        });\n\n   \n        \n    }\n\n  \n\n\n}\n\nexport default View;\n\n\n\n","import Chart from \"./scripts/chart\";\nimport View from \"./scripts/view\";\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n\n    \n    \n\n    d3.select(\"body\")\n    .style(\"background-image\",\"url('./images/island.png')\");\n\n\n    new View();\n\n\n})"],"names":["constructor","stock","time_period","svg","this","data","console","log","get_data","then","data_array","render_line","get_period","string","received_data","formatTime","d3","timeFormat","today","Date","cutoffdate","daysAgo","setDate","getDate","filter","d","timestamp","sort","a","b","start_value","value","end_value","length","chart_color","xScale","scaleTime","domain","extent","range","yScale","scaleLinear","min","max","line","x","y","select","empty","append","attr","feMerge","gradient","selectAll","min_value","area","y1","y0","line_path","area_path","style","datum","transition","duration","ease","easeLinear","xAxis","axisBottom","tickFormat","max_value","tick_interval","tick_values_axis","tick_values_grid","yAxis","axisRight","tickValues","xAxisgroup","call","yAxisgroup","yAxisGrid","tickSize","hoverCircle","hoverText","hoverLine","on","event","mx","my","pointer","date","invert","index","bisectDate","bisector","left","closestDataPoint","text","ticker","url","url_maker","res","fetch","time_series","json","Object","keys","map","key","parseFloat","symbol","generateRandomData","startTime","setHours","endTime","time","setMinutes","getMinutes","randomPrice","Math","random","push","toISOString","toFixed","main","render","ticker_input","links","openModal","user_guide","window","target","node","bound_search_ticker","test_search_ticker","bind","debounced_search_ticker","debounce","callback","delay","timeout","arg","clearTimeout","setTimeout","fetch_url","base_url","property","tickers","render_search_dropdown","dropdown_items_array","remove","dropdown_items","name","enter","render_chart_ticker","Security","render_chart","show_zoom_buttons","selected_time_period","Chart","chart","zoom","zoom_out","indexOf","document","addEventListener","View"],"sourceRoot":""}