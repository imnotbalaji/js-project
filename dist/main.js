!function(){"use strict";var t,e,a;t=class{constructor(t,e){this.data=t.data,t.get_data().then((t=>{this.render_line(t,e)}))}render_bar(t,e){const a=d3.scaleBand().domain(t.map((t=>t.name))).range([0,200]),n=d3.max(t,(t=>t.open)),s=n>0?n:1,r=d3.scaleLinear().domain([0,s]).range([200,0]);let o=e.selectAll("rect").data(t);o.enter().append("rect").attr("x",(t=>a(t.name))).attr("y",(t=>200)).attr("width",a.bandwidth()-5).attr("height",0).attr("fill","blue").transition().duration(1e3).attr("y",(t=>r(t.open))).attr("height",(t=>200-r(t.open))),o.transition().duration(1e3).attr("y",(t=>r(t.open))).attr("height",(t=>200-r(t.open))),o.exit().transition().duration(1e3).attr("y",200).attr("height",0).remove(),e.selectAll("rect").on("mouseover",(function(t,e){d3.select(this).attr("fill","orange")})).on("mouseout",(function(t,e){d3.select(this).attr("fill","blue")})),e.append("g").attr("class","x-axis").attr("transform","translate(0,200)").call(d3.axisBottom(a).ticks(t.length)),e.append("g").attr("class","y-axis").call(d3.axisLeft(r))}render_line(t,e){const a=d3.timeFormat("%m-%y"),n=e.node().clientWidth,s=e.node().clientHeight;t.sort(((t,e)=>new Date(t.timestamp)-new Date(e.timestamp)));const r=d3.scaleTime().domain(d3.extent(t,(t=>new Date(t.timestamp)))).range([0,n]),o=d3.scaleLinear().domain([0,d3.max(t,(t=>t.value))]).range([s,0]),i=d3.line().x((t=>r(new Date(t.timestamp)))).y((t=>o(t.value)));if(e.select("#shadow").empty()){const t=e.append("defs").append("filter").attr("id","shadow");t.append("feOffset").attr("in","SourceGraphic").attr("dx",0).attr("dy",10).attr("result","offOut"),t.append("feGaussianBlur").attr("in","off0ut").attr("stdDeviation",10).attr("result","blurOut"),t.append("feBlend").attr("in","SourceGraphic").attr("in2","blurOut").attr("mode","normal")}let l=e.select("path");l.empty()&&(l=e.append("path").datum({}).attr("fill","none").attr("stroke","steelblue").attr("stroke-width",2).attr("filter","url(#shadow")),l.datum(t).transition().duration(1e3).attr("d",i);const d=d3.axisBottom(r).tickFormat((t=>a(t))),p=d3.axisRight(o);let c=e.select(".x-axis");c.empty()&&(c=e.append("g").attr("class","x-axis").attr("transform","translate(0,"+s+")")),c.transition().duration(1e3).call(d);let u=e.select(".y-axis");u.empty()&&(u=e.append("g").attr("class","y-axis").attr("transform","translate("+n+",0)")),u.transition().duration(1e3).call(p);const m=e.append("circle").attr("r",5).attr("fill","red").style("display","none"),y=e.append("text").attr("dy","-1em").style("text-anchor","middle").style("display","none"),h=e.append("line").attr("stroke","grey").attr("stroke-width","1").attr("stroke-dasharray","5,5").style("display","none");e.on("mouseover",(function(){m.style("display",null),y.style("display",null),h.style("display",null)})).on("mousemove",(function(e){const[a,n]=d3.pointer(e),s=r.invert(a),i=(0,d3.bisector((t=>new Date(t.timestamp))).left)(t,s),l=t[i];console.log(l),m.attr("cx",r(new Date(l.timestamp))).attr("cy",o(l.value)),h.attr("x1",r(new Date(l.timestamp))).attr("x2",r(new Date(l.timestamp))).attr("y1",o(0)).attr("y2",o(l.value)),y.attr("x",r(new Date(l.timestamp))).attr("y",o(l.value)-10).text(l.value)})).on("mouseout",(function(){m.style("display","none"),y.style("display","none"),h.style("display","none")}))}},e=class{constructor(t){this.ticker=t,this.data=[30,80,45,60,121,90,15]}async get_data(){const t=(await d3.json("./test_data/IBM_daily_full.json"))["Time Series (Daily)"];return Object.keys(t).map((e=>({timestamp:e,value:parseFloat(t[e]["1. open"])})))}url_maker(){return"https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol="+this.ticker+"&outputsize=full&apikey=MHTLO8QSWV47YWUG"}generateRandomData(){const t=[],e=new Date;e.setHours(9,0,0,0);const a=new Date;a.setHours(17,0,0,0);for(let n=e;n<=a;n.setMinutes(n.getMinutes()+30)){const e=100*Math.random()+100;t.push({timestamp:n.toISOString(),value:e.toFixed(2)})}return t}},a=class{constructor(){const t=d3.select("#main");this.main=t,this.render(t)}render(t){t.style("height","500px").style("width","70%").style("border","none").style("border-radius","2%").style("background-color","white").style("box-shadow","5px 5px 10px rgba(0, 0, 0, 0.5)"),t.append("h1").text("Welcome").style("font-size","30px").style("margin","5px");const e=t.append("input").attr("placeholder","Enter your ticker").style("border","none").style("margin","20px 20px").style("font-size","20px").style("padding","10px 10px").style("text-transform","uppercase").style("box-shadow","5px 5px 10px rgba(0, 0, 0, 0.5)"),a=t.append("svg").style("margin","50px").attr("width","70%").attr("height","auto").style("overflow","visible");this.svg=a,e.on("keypress",this.handle_enter.bind(this))}handle_enter(a){let n=this.main,s=this.svg;if("Enter"===a.key){const r=d3.select(a.target).property("value"),o=new e(r);n.append("button").text("Zoom In").on("click",(()=>console.log("zoom in"))),n.append("button").text("Zoom Out").on("click",(()=>console.log("zoom out"))),new t(o,s)}}},document.addEventListener("DOMContentLoaded",(()=>{d3.select("body").style("background-image","url('./images/island.png')"),new a}))}();
//# sourceMappingURL=main.js.map