!function(){"use strict";var t,e,a;t=class{constructor(t,e,a){this.time_period=e,this.data=t.data,t.get_data().then((t=>{this.render_line(t,this.get_period(e),a)}))}get_period(t){switch(t){case"All":return 18250;case"10Y":return 3650;case"5Y":return 1825;case"2Y":return 730;case"1Y":return 365;case"6M":return 180;case"3M":return 90;case"1M":return 30}}render_line(t,e,a){const r=d3.timeFormat("%b-%y"),s=new Date,n=new Date,i=e;n.setDate(s.getDate()-i);const o=t.filter((t=>new Date(t.timestamp)>n));o.sort(((t,e)=>new Date(t.timestamp)-new Date(e.timestamp)));const l=o[0].value;let d;d=o[o.length-1].value>l?"green":"red";const p=d3.scaleTime().domain(d3.extent(o,(t=>new Date(t.timestamp)))).range([0,800]),c=d3.scaleLinear().domain([d3.min(o,(t=>t.value)),d3.max(o,(t=>t.value))]).range([400,0]),y=d3.line().x((t=>p(new Date(t.timestamp)))).y((t=>c(t.value)));if(a.select("#shadow").empty()){const t=a.append("defs").append("filter").attr("id","shadow").attr("x","0%").attr("y","-50%").attr("height","200%").attr("width","200%");t.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",3).attr("result","blur"),t.append("feOffset").attr("in","blur").attr("dx",3).attr("dy",3).attr("result","offsetBlur");let e=t.append("feMerge");e.append("feMergeNode").attr("in","offsetBlur"),e.append("feMergeNode").attr("in","SourceGraphic")}if(a.select("#gradient").empty()){let t=a.select("defs").append("linearGradient").attr("id","gradient").attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");t.append("stop").attr("offset","0%").attr("stop-color",d).attr("stop-opacity",.3),t.append("stop").attr("offset","100%").attr("stop-color",d).attr("stop-opacity",0)}a.select("#gradient").selectAll("stop").attr("stop-color",d);let m=d3.min(o,(t=>t.value)),h=d3.area().x((t=>p(new Date(t.timestamp)))).y1((t=>c(t.value))).y0(c(m)),u=a.select(".line-path"),g=a.select(".area-path");g.empty()&&(g=a.append("path").attr("class","area-path").style("fill","url(#gradient")),g.datum(o).attr("d",h),u.empty()&&(u=a.append("path").attr("class","line-path").attr("fill","none").attr("stroke",d).attr("stroke-width",.7)),a.select(".line-path").attr("stroke",d),u.datum(o).attr("d",y),u.attr("opacity",0).transition().duration(500).ease(d3.easeLinear).attr("opacity",1);const x=d3.axisBottom(p).tickFormat((t=>r(t)));let w=d3.max(o,(t=>t.value)),f=(w-m)/4,b=[m,m+f,m+2*f,m+3*f,w],v=[m+f,m+2*f,m+3*f,w];const _=d3.axisRight(c).tickValues(b);let k=a.select(".x-axis");k.empty()&&(k=a.append("g").attr("class","x-axis").attr("transform","translate(0,400)")),k.transition().duration(1e3).call(x);let D=a.select(".y-axis");D.empty()&&(D=a.append("g").attr("class","y-axis").attr("transform","translate(800,0)")),D.transition().duration(1e3).call(_);const z=d3.axisRight(c).tickSize(800).tickValues(v).tickFormat("");a.append("g").attr("class","y grid").call(z),a.selectAll("text").style("font-family","Arial").style("font-zie","14px");const M=a.append("circle").attr("r",5).attr("fill","red").style("display","none"),S=a.append("text").attr("dy","-1em").style("text-anchor","middle").style("display","none"),A=a.append("line").attr("stroke","grey").attr("stroke-width","1").attr("stroke-dasharray","5,5").style("display","none");a.on("mouseover",(function(){M.style("display",null),S.style("display",null),A.style("display",null)})).on("mousemove",(function(t){const[e,a]=d3.pointer(t),r=p.invert(e),s=(0,d3.bisector((t=>new Date(t.timestamp))).left)(o,r),n=o[s];M.attr("cx",p(new Date(n.timestamp))).attr("cy",c(n.value)),A.attr("x1",p(new Date(n.timestamp))).attr("x2",p(new Date(n.timestamp))).attr("y1",c(m)).attr("y2",c(n.value)),S.attr("x",p(new Date(n.timestamp))).attr("y",c(n.value)-10).text(n.value).style("font-family","Roboto, Sans Serif").style("font-size","12px").style("font-weight","bold")})).on("mouseout",(function(){M.style("display","none"),S.style("display","none"),A.style("display","none")}))}},e=class{constructor(t){this.ticker=t,this.data=[30,80,45,60,121,90,15]}async get_data(){let t=this.url_maker();const e=await fetch(t),a=(await e.json())["Time Series (Daily)"];return Object.keys(a).map((t=>({timestamp:t,value:parseFloat(a[t]["1. open"])})))}url_maker(){return"https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol="+this.ticker.symbol+"&outputsize=full&apikey=XIW7BTPB24E0PU15"}generateRandomData(){const t=[],e=new Date;e.setHours(9,0,0,0);const a=new Date;a.setHours(17,0,0,0);for(let r=e;r<=a;r.setMinutes(r.getMinutes()+30)){const e=100*Math.random()+100;t.push({timestamp:r.toISOString(),value:e.toFixed(2)})}return t}},a=class{constructor(){const t=d3.select("#main");this.render(t)}render(t){t.style("height","90vh").style("width","70%").style("border","none").style("border-radius","1%").style("background-color","white").style("box-shadow","5px 5px 10px rgba(0, 0, 0, 0.5)");const e=t.append("div").attr("id","search_container").attr("position","relative").style("padding","20px").style("width","90%").style("height","10%").append("input").attr("id","search-input").attr("placeholder","Input your ticker to get started...").style("width","50%").style("border","1px solid grey").style("border-radius","15px").style("margin","20px 20px").style("font-size","20px").style("padding","10px 10px").style("box-shadow","5px 5px 10px rgba(0, 0, 0, 0.5)").style("text-transform","uppercase"),a=t.append("div").attr("id","chart").style("height","80%").style("margin-top","25px").attr("position","absolute"),r=(a.append("img").attr("id","home_page").attr("src","./images/Home_page.png").style("height","90%").style("width","90%").style("margin-top","0px"),a.append("svg").attr("viewBox","0 0 800 400").attr("preserveAspectRatio","none").style("width","0%").style("height","0%").style("overflow","visible"),t.append("div").attr("id","footer").style("width","100%").style("background-color","beige").style("height","10%").style("border-top","2px solid grey"),d3.select("#footer").append("div").attr("id","links").style("margin-left","20px"));r.append("a").attr("id","github").attr("href","https://github.com/imnotbalaji").attr("target","_blank").append("img").attr("src","./images/github.png").style("width","25px"),r.append("a").attr("id","github").attr("href","https://www.linkedin.com/in/balajiv1/").attr("target","_blank").append("img").attr("src","./images/linked_in.png").style("width","25px");const s=d3.select("#footer").append("button").attr("id","Instructions").text("User Guide").style("margin-right","20px");let n=d3.select("#user-guide");s.on("click",(function(){n.style("display","block")})),d3.select(".close").on("click",(function(){n.style("display","none")})),d3.select(window).on("click",(function(t){t.target==n.node()&&n.style("display","none")}));const i=this.test_search_ticker.bind(this),o=this.debounce(i,250);e.on("input",o)}debounce(t,e){let a;return r=>{clearTimeout(a),a=setTimeout((()=>t(r)),e)}}async test_search_ticker(t){if(""!==t.target.value){const e="https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords="+d3.select(t.target).property("value")+"&datatype=json&apikey=XIW7BTPB24E0PU15",a=await fetch(e),r=await a.json();this.render_search_dropdown(r.bestMatches)}else d3.select("#dropdown").attr("class","dropdown-hidden")}render_search_dropdown(t){d3.select("#dropdown").remove();const e=t.map((t=>({symbol:t["1. symbol"],name:t["2. name"]})));d3.select("#search_container").append("div").attr("id","dropdown").style("position","absolute").style("width","45%").style("background-color","white").attr("overflow-y","auto").style("margin-left","5px").style("margin-top","65px").style("padding","10px 10px").style("border","1px solid black").style("border-radius","15px").selectAll("div").data(e).enter().append("div").attr("id","dropdown-item").attr("width","30%").text((t=>`${t.symbol}      ${t.name}`)).on("click",((t,e)=>{d3.select("#search-input").property("value",e.symbol),this.render_chart_ticker(e)}))}render_chart_ticker(t){d3.select("#dropdown").remove(),d3.select("#home_page").remove();let a=d3.select("svg");a.style("width","80%").style("height","75%");const r=new e(t);this.render_chart(r,"All",a),this.show_zoom_buttons(r)}render_chart(e,a,r){new t(e,a,r)}show_zoom_buttons(t){let e=d3.select("#chart"),a=d3.select("svg");const r=["All","10Y","5Y","2Y","1Y","6M","3M","1M"];let s=r[0],n=d3.select("#zoom");n.empty()&&(n=e.append("div").attr("id","zoom"),n.append("img").attr("id","zoom-out").attr("src","./images/zoom_out.png").attr("width","25px").attr("height","25px"),n.append("span").attr("id","zoom_text"),n.append("img").attr("id","zoom-in").attr("src","./images/zoom_in.png").attr("width","25px").attr("height","25px"));let i=d3.select("#zoom-out");d3.select("#zoom_text").text(s),i.on("click",(()=>{s=r[r.indexOf(s)-1],d3.select("#zoom_text").text(s),this.render_chart(t,s,a)})),d3.select("#zoom-in").on("click",(()=>{s=r[r.indexOf(s)+1],d3.select("#zoom_text").text(s),this.render_chart(t,s,a)}))}},document.addEventListener("DOMContentLoaded",(()=>{d3.select("body").style("background-image","url('./images/island.png')"),new a}))}();
//# sourceMappingURL=main.js.map